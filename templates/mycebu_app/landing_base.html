{# landing_base.html #}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyCebu - Government Services</title>
  <link rel="stylesheet" href="{% static 'mycebu_app/css/globals.css' %}">
  <link rel="stylesheet" href="{% static 'mycebu_app/css/header.css' %}">
  {% if current_tab == "landing" %}
  <link rel="stylesheet" href="{% static 'mycebu_app/css/home.css' %}">
  {% elif current_tab == 'dashboard' %}
  <link rel="stylesheet" href="{% static 'mycebu_app/css/dashboard.css' %}">
  {% elif current_tab == 'services' %}
  <link rel="stylesheet" href="{% static 'mycebu_app/css/services.css' %}">
  <script src="{% static 'mycebu_app/js/services.js' %}" defer></script>
  <script src="{% static 'mycebu_app/js/services-filter.js' %}" defer></script>
  {% elif current_tab == 'ordinances' %}
  <link rel="stylesheet" href="{% static 'mycebu_app/css/ordinances.css' %}">
  <script src="{% static 'mycebu_app/js/ordinances.js' %}" defer></script>
  {% elif current_tab == 'directory' %}
  <link rel="stylesheet" href="{% static 'mycebu_app/css/directory.css' %}">
  <script src="{% static 'mycebu_app/js/directory.js' %}" defer></script>
  <script src="{% static 'mycebu_app/js/directory-filter.js' %}" defer></script>
  <script src="{% static 'mycebu_app/js/directory-tab.js' %}" defer></script>
  {% endif %}
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <nav class="topnav">
    <div class="nav-container">
      <div class="logo" style="display:flex;align-items:center;gap:10px;">
        <button class="hamburger" id="hamburger" aria-label="Open menu" aria-controls="mobile-drawer"
          aria-expanded="false">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>
        <img src="{% static 'mycebu_app/icons/my-cebu-ico.png' %}" alt="Logo" style="width:40px;height:auto;">
        <div>
          <h3>MyCebu</h3>
          <span>Government Services</span>
        </div>
      </div>

      <div class="nav-links">
        <a class="{% if current_tab == 'landing' or current_tab == 'dashboard' %}active{% endif %}"
          href="{% if authed_user %}{% url 'landing_tab' tab='dashboard' %}{% else %}{% url 'landing_tab' tab='landing' %}{% endif %}">
          Home
        </a>
        <a class="{% if current_tab == 'services' %}active{% endif %}"
          href="{% url 'landing_tab' tab='services' %}">Services</a>
        <a class="{% if current_tab == 'ordinances' %}active{% endif %}"
          href="{% url 'landing_tab' tab='ordinances' %}">Ordinances</a>
        <a class="{% if current_tab == 'directory' %}active{% endif %}"
          href="{% url 'landing_tab' tab='directory' %}">Directory</a>
        <a class="{% if current_tab == 'about' %}active{% endif %}" href="{% url 'landing_tab' tab='about' %}">About</a>
        <span class="highlight"></span>
      </div>

      <div class="account">
        {% if authed_user %}
        <div class="who">
          <strong>{{ authed_user.display_name|default:authed_user.email }}</strong>
          <span>{{ authed_user.email }}</span>
        </div>
        <a href="{% url 'landing_tab' tab='profile' %}" class="avatar-link" aria-label="Profile">
          <img class="avatar"
            src="{% if authed_user and authed_user.avatar_url %}{{ authed_user.avatar_url }}{% else %}{% static 'mycebu_app/icons/blank.png' %}{% endif %}"
            alt="Profile">
        </a>
        {% else %}
        <a href="{% url 'login' %}" class="sign-in">Sign in</a>
        <a href="{% url 'register' %}" class="dashboard">Sign Up</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="mobile-overlay" id="mobile-overlay"></div>

  <aside class="mobile-drawer" id="mobile-drawer" aria-hidden="true">
    <div class="drawer-header">
      <img class="avatar"
        src="{% if authed_user and authed_user.avatar_url %}{{ authed_user.avatar_url }}{% else %}{% static 'mycebu_app/icons/blank.png' %}{% endif %}"
        alt="Profile">
      <div class="who">
        {% if authed_user %}
        <strong>{{ authed_user.display_name|default:authed_user.email }}</strong>
        <span>{{ authed_user.email }}</span>
        {% else %}
        <strong>Guest</strong>
        <span>Not signed in</span>
        {% endif %}
      </div>
      <button class="drawer-close" id="drawer-close" aria-label="Close menu">×</button>
    </div>

    <nav class="drawer-nav">
      <a class="item {% if current_tab == 'landing' or current_tab == 'dashboard' %}active{% endif %}"
        href="{% if authed_user %}{% url 'landing_tab' tab='dashboard' %}{% else %}{% url 'landing_tab' tab='landing' %}{% endif %}">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z" />
        </svg>
        <span>Home</span>
      </a>
      <a class="item {% if current_tab == 'services' %}active{% endif %}" href="{% url 'landing_tab' tab='services' %}">
        <svg viewBox="0 0 24 24">
          <path d="M4 4h7v7H4zM13 4h7v7h-7zM4 13h7v7H4zM13 13h7v7h-7z" />
        </svg>
        <span>Services</span>
      </a>
      <a class="item {% if current_tab == 'ordinances' %}active{% endif %}"
        href="{% url 'landing_tab' tab='ordinances' %}">
        <svg viewBox="0 0 24 24">
          <path d="M6 2h9l3 3v17a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm8 4h3l-3-3v3zM7 8h10M7 12h10M7 16h7"
            stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" />
        </svg>
        <span>Ordinances</span>
      </a>
      <a class="item {% if current_tab == 'directory' %}active{% endif %}"
        href="{% url 'landing_tab' tab='directory' %}">
        <svg viewBox="0 0 24 24">
          <path d="M3 5h14a2 2 0 0 1 2 2v11H5a2 2 0 0 1-2-2z" />
          <path d="M19 5v13a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z" />
        </svg>
        <span>Directory</span>
      </a>
      <a class="item {% if current_tab == 'about' %}active{% endif %}" href="{% url 'landing_tab' tab='about' %}">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
          <path
            d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
        </svg>
        <span>About</span>
      </a>
    </nav>

    <div class="drawer-footer">
      {% if authed_user %}
      <a class="item inline-flex items-center gap-2" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
          <path
            d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z" />
        </svg>
        <span>Settings</span>
      </a>

      {% else %}
      <a class="item" href="{% url 'login' %}">
        <svg viewBox="0 0 24 24">
          <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
          <path d="M19.4 15a7.49 7.49 0 0 1-14.8 0" />
        </svg>
        <span>Sign in</span>
      </a>
      {% endif %}
    </div>
  </aside>

  <main>
    {% block content %}{% endblock content %}
  </main>
  <footer>
    <p>© 2025 MyCebu Government Services. All rights reserved.</p>
  </footer>

  <script></script>
  <script src="{% static 'mycebu_app/js/header.js' %}" defer></script>
  <script src="{% static 'mycebu_app/js/section-skeleton.js' %}" defer></script>
</body>

</html>